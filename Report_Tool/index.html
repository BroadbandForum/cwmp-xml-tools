<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>report.pl - generate report on TR-069 DM instances</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:rurban@x-ray.at" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#options">OPTIONS</a></li>
	<li><a href="#limitations">LIMITATIONS</a></li>
	<li><a href="#author">AUTHOR</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p><strong>report.pl</strong> [--autobase] [--autodatatype] [--canonical] [--components] [--debugpath=pattern(&quot;&quot;)] [--deletedeprecated] [--dtprofile=s]... [--dtspec[=s]] [--help] [--ignore=pattern(&quot;&quot;)] [--importsuffix=string(&quot;&quot;)] [--include=d]... [--info] [--lastonly] [--marktemplates] [--noautomodel] [--nocomments] [--nohyphenate] [--nolinks] [--nomodels] [--noobjects] [--noparameters] [--noprofiles] [--notemplates] [--nowarnredef] [--nowarnprofbadref] [--objpat=pattern(&quot;&quot;)] [--pedantic[=i(1)]] [--quiet] [--report=html|(null)|tab|text|xls|xml|xml2|xsd] [--showspec] [--showsyntax] [--special=deprecated|nonascii|normative|notify|obsoleted|profile|rfc] [--thisonly] [--tr106=s(TR-106)] [--ugly] [--upnpdm] [--verbose[=i(1)]] [--warnbibref[=i(1)]] [--writonly] DM-instance...</p>
<ul>
<li><strong><a name="cannot_specify_both_report_and_special" class="item">cannot specify both --report and --special</a></strong>

</li>
</ul>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>The files specified on the command line are assumed to be XML TR-069 data model definitions compliant with the <em>cwmp:datamodel</em> (DM) XML schema.</p>
<p>The script parses, validates (ahem) and reports on these files, generating output in various possible formats to <em>stdout</em>.</p>
<p>There are a large number of options but in practice only a few need to be used.  For example:</p>
<p>./report.pl --pedantic --report html tr-098-1-2-0.xml &gt;tr-098-1-2-0.html</p>
<p>
</p>
<hr />
<h1><a name="options">OPTIONS</a></h1>
<dl>
<dt><strong><a name="autobase" class="item"><strong>--autobase</strong></a></strong></dt>

<dd>
<p>causes automatic addition of <strong>base</strong> attributes when models, parameters and objects are re-defined, and suppression of redefinition warnings (useful when processing auto-generated data model definitions)</p>
</dd>
<dt><strong><a name="autodatatype" class="item"><strong>--autodatatype</strong></a></strong></dt>

<dd>
<p>causes the <strong>{{datatype}}</strong> template to be automatically prefixed for parameters with named data types</p>
<p>this is deprecated because it is enabled by default</p>
</dd>
<dt><strong><a name="canonical" class="item"><strong>--canonical</strong></a></strong></dt>

<dd>
<p>affects only the <strong>xml2</strong> report; causes descriptions to be processed into a canonical form that eases comparison with the original Microsoft Word descriptions</p>
</dd>
<dt><strong><a name="components" class="item"><strong>--components</strong></a></strong></dt>

<dd>
<p>affects only the <strong>xml2</strong> report; generates a component for each object; if <strong>--noobjects</strong> is also specified, the component omits the object definition and consists only of parameter definitions</p>
</dd>
<dt><strong><a name="pattern" class="item"><strong>--debugpath=pattern(&quot;&quot;)</strong></a></strong></dt>

<dd>
<p>outputs debug information for parameters and objects whose path names match the specified pattern</p>
</dd>
<dt><strong><a name="deletedeprecated" class="item"><strong>--deletedeprecated</strong></a></strong></dt>

<dd>
<p>mark all deprecated or obsoleted items as deleted</p>
</dd>
<dt><strong><a name="dtprofile_s" class="item"><strong>--dtprofile=s</strong>...</a></strong></dt>

<dd>
<p>affects only the <strong>xml2</strong> report; can be specified multiple times; defines names of profiles to be used to generate an example DT instance</p>
</dd>
<dt><strong><a name="dtspec_s" class="item"><strong>--dtspec=s</strong></a></strong></dt>

<dd>
<p>affects only the <strong>xml2</strong> report; has an affect only when <strong>--dtprofile</strong> is also present; specifies the value of the top-level <strong>spec</strong> attribute in the generated DT instance; if not specified, the spec defaults to <strong>urn:example-com:device-1-0-0</strong></p>
</dd>
<dt><strong><a name="help" class="item"><strong>--help</strong></a></strong></dt>

<dd>
<p>requests output of usage information</p>
</dd>
<dt><strong><a name="ignore" class="item"><strong>--ignore</strong></a></strong></dt>

<dd>
<p>specifies a pattern; data models whose names begin with the pattern will be ignored</p>
</dd>
<dt><strong><a name="string" class="item"><strong>--importsuffix=string(&quot;&quot;)</strong></a></strong></dt>

<dd>
<p>specifies a suffix which, if specified, will be appended (preceded by a hyphen) to the name part of any imported files in b&lt;xml&gt; reports</p>
</dd>
<dt><strong><a name="include_d" class="item"><strong>--include=d</strong>...</a></strong></dt>

<dd>
<p>can be specified multiple times; specifies directories to search for files specified on the command line or included from other files; the current directory is always searched first</p>
<p>no search is performed for files that already include directory names</p>
</dd>
<dt><strong><a name="info" class="item"><strong>--info</strong></a></strong></dt>

<dd>
<p>output details of author, date, version etc</p>
</dd>
<dt><strong><a name="lastonly" class="item"><strong>--lastonly</strong></a></strong></dt>

<dd>
<p>reports only on items that were defined or modified in the last file that was specified on the command line</p>
<p>note that the <strong>xml</strong> report always does something similar but might not work properly if this option is specified</p>
</dd>
<dt><strong><a name="marktemplates" class="item"><strong>--marktemplates</strong></a></strong></dt>

<dd>
<p>mark selected template expansions with <strong>&amp;&amp;&amp;&amp;</strong> followed by template-related information, a colon and a space</p>
<p>for example, the <strong>reference</strong> template is marked by a string such as <strong>&amp;&amp;&amp;&amp;pathRef-strong:</strong>, <strong>&amp;&amp;&amp;&amp;pathRef-weak:</strong>, <strong>&amp;&amp;&amp;&amp;instanceRef-strong:</strong>, <strong>&amp;&amp;&amp;&amp;instanceRef-strong-list:</strong> or <strong>enumerationRef:</strong></p>
<p>and the <strong>list</strong> template is marked by a string such as <strong>&amp;&amp;&amp;&amp;list-unsisgnedInt:</strong> or <strong>&amp;&amp;&amp;&amp;list-IPAddress:</strong></p>
</dd>
<dt><strong><a name="noautomodel" class="item"><strong>--noautomodel</strong></a></strong></dt>

<dd>
<p>disables the auto-generation, if no <strong>model</strong> element was encountered, of a <strong>Components</strong> model that references each component</p>
</dd>
<dt><strong><a name="nocomments" class="item"><strong>--nocomments</strong></a></strong></dt>

<dd>
<p>disables generation of XML comments showing what changed etc (<strong>--verbose</strong> always switches it off)</p>
</dd>
<dt><strong><a name="nohyphenate" class="item"><strong>--nohyphenate</strong></a></strong></dt>

<dd>
<p>prevents automatic insertion of soft hyphens</p>
</dd>
<dt><strong><a name="nolinks" class="item"><strong>--nolinks</strong></a></strong></dt>

<dd>
<p>affects only the <strong>html</strong> report; disables generation of hyperlinks (which makes it easier to import HTML into Word documents)</p>
</dd>
<dt><strong><a name="nomodels" class="item"><strong>--nomodels</strong></a></strong></dt>

<dd>
<p>specifies that model definitions should not be reported</p>
</dd>
<dt><strong><a name="noobjects" class="item"><strong>--noobjects</strong></a></strong></dt>

<dd>
<p>affects only the <strong>xml2</strong> report when <strong>--components</strong> is specified; omits objects from component definitions</p>
</dd>
<dt><strong><a name="noparameters" class="item"><strong>--noparameters</strong></a></strong></dt>

<dd>
<p>affects only the <strong>xml2</strong> report when <strong>--components</strong> is specified; omits parameters from component definitions</p>
<p><strong>NOT YET IMPLEMENTED</strong></p>
</dd>
<dt><strong><a name="noprofiles" class="item"><strong>--noprofiles</strong></a></strong></dt>

<dd>
<p>specifies that profile definitions should not be reported</p>
</dd>
<dt><strong><a name="notemplates" class="item"><strong>--notemplates</strong></a></strong></dt>

<dd>
<p>suppresses template expansion (currently affects only <strong>html</strong> reports</p>
</dd>
<dt><strong><a name="nowarnredef" class="item"><strong>--nowarnredef</strong></a></strong></dt>

<dd>
<p>disables parameter and object redefinition warnings (these warnings are also output if <strong>--verbose</strong> is specified)</p>
<p>there are some circumstances under which parameter or object redefinition is not worthy of comment</p>
</dd>
<dt><strong><a name="nowarnprofbadref" class="item"><strong>--nowarnprofbadref</strong></a></strong></dt>

<dd>
<p>disables warnings when a profile references an invalid object or parameter</p>
<p>there are some circumstances under which it's useful to use an existing profile definition where some objects or parameters that it references have been (deliberately) deleted</p>
<p>this is deprecated because it is no longer needed (use status=&quot;deleted&quot; as appropriate to suppress such errors)</p>
</dd>
<dt><strong><a name="objpat_pattern" class="item"><strong>--objpat=pattern</strong></a></strong></dt>

<dd>
<p>specifies an object name pattern (a regular expression); objects that do not match this pattern will be ignored (the default of &quot;&quot; matches all objects)</p>
</dd>
<dt><strong><a name="i" class="item"><strong>--pedantic=[i(1)]</strong></a></strong></dt>

<dd>
<p>enables output of warnings to <em>stderr</em> when logical inconsistencies in the XML are detected; if the option is specified without a value, the value defaults to 1</p>
</dd>
<dt><strong><a name="quiet" class="item"><strong>--quiet</strong></a></strong></dt>

<dd>
<p>suppresses informational messages</p>
</dd>
<dt><strong><a name="report_html_null_tab_text_xls_xml_xml2_xsd" class="item"><strong>--report=html|(null)|tab|text|xls|xml|xml2|xsd</strong></a></strong></dt>

<dd>
<p>specifies the report format; one of the following:</p>
<dl>
<dt><strong><a name="html" class="item"><strong>html</strong></a></strong></dt>

<dd>
<p>HTML document; see also <strong>--nolinks</strong> and <strong>--notemplates</strong></p>
</dd>
<dt><strong><a name="null" class="item"><strong>null</strong></a></strong></dt>

<dd>
<p>no output; errors go to <em>stdout</em> rather than <em>stderr</em> (default)</p>
</dd>
<dt><strong><a name="tab" class="item"><strong>tab</strong></a></strong></dt>

<dd>
<p>tab-separated list, one object or parameter per line</p>
</dd>
<dt><strong><a name="text" class="item"><strong>text</strong></a></strong></dt>

<dd>
<p>indented text</p>
</dd>
<dt><strong><a name="xls" class="item"><strong>xls</strong></a></strong></dt>

<dd>
<p>Excel XML spreadsheet</p>
</dd>
<dt><strong><a name="xml" class="item"><strong>xml</strong></a></strong></dt>

<dd>
<p>if <strong>--lastonly</strong> is specified, DM XML containing only the changes made by the final file on the command line; see also <strong>--autobase</strong></p>
<p>if <strong>--lastonly</strong> is not specified, DM XML with all imports resolved (apart from bibliographic references and data type definitions); use <strong>--dtprofile</strong>, optionally with <strong>--dtspec</strong>, to generate DT XML for the specified profiles; use <strong>--canonical</strong> to generate canonical and more easily compared descriptions; use <strong>--components</strong> (perhaps with <strong>--noobjects</strong> or <strong>--noparameters</strong>) to generate component definitions</p>
</dd>
<dt><strong><a name="xml2" class="item"><strong>xml2</strong></a></strong></dt>

<dd>
<p>same as the <strong>xml</strong> report with <strong>--lastonly</strong> not specified; deprecated (use <strong>xml</strong> instead)</p>
</dd>
<dt><strong><a name="xsd" class="item"><strong>xsd</strong></a></strong></dt>

<dd>
<p>W3C schema</p>
</dd>
</dl>
</dd>
<dt><strong><a name="showspec" class="item"><strong>--showspec</strong></a></strong></dt>

<dd>
<p>currently affects only the <strong>html</strong> report; generates a <strong>Spec</strong> rather than a <strong>Version</strong> column</p>
<p>note that if an object or parameter is modified, the spec for it's parent, and so on up to the root object, is updated (this is not what would intuitively be expected)</p>
</dd>
<dt><strong><a name="showsyntax" class="item"><strong>--showsyntax</strong></a></strong></dt>

<dd>
<p>adds an extra column containing a summary of the parameter syntax; is like the Type column for simple types, but includes additional details for lists</p>
</dd>
<dt><strong><a name="special_deprecated_nonascii_normative_notify_obsoleted_profile_rfc" class="item"><strong>--special=deprecated|nonascii|normative|notify|obsoleted|profile|rfc</strong></a></strong></dt>

<dd>
<p>performs special checks, most of which assume that several versions of the same data model have been supplied on the command line, and many of which operate only on the highest version of the data model</p>
<dl>
<dt><strong><a name="deprecated_obsoleted" class="item"><strong>deprecated</strong>, <strong>obsoleted</strong></a></strong></dt>

<dd>
<p>for each profile item (object or parameter) report if it is deprecated or obsoleted</p>
</dd>
<dt><strong><a name="nonascii" class="item"><strong>nonascii</strong></a></strong></dt>

<dd>
<p>check which model, object, parameter or profile descriptions contain characters other than ASCII 9-10 or 32-126; the output is the full path names of all such items, together with the offending descriptions with the invalid characters surrounded by pairs of asterisks</p>
</dd>
<dt><strong><a name="normative" class="item"><strong>normative</strong></a></strong></dt>

<dd>
<p>check which model, object, parameter or profile descriptions contain inappropriate use of normative language, i.e. lower-case normative words, or <strong>MAY NOT</strong>; the output is the full path names of all such items, together with the offending descriptions with the normative words surrounded by pairs of asterisks</p>
</dd>
<dt><strong><a name="notify" class="item"><strong>notify</strong></a></strong></dt>

<dd>
<p>check which parameters in the highest version of the data model are not in the &quot;can deny active notify request&quot; table; the output is the full path names of all such parameters, one per line</p>
</dd>
<dt><strong><a name="profile" class="item"><strong>profile</strong></a></strong></dt>

<dd>
<p>check which parameters defined in the highest version of the data model are not in profiles; the output is the full path names of all such parameters, one per line</p>
</dd>
<dt><strong><a name="rfc" class="item"><strong>rfc</strong></a></strong></dt>

<dd>
<p>check which model, object, parameter or profile descriptions mention RFCs without giving references; the output is the full path names of all such items, together with the offending descriptions with the normative words surrounded by pairs of asterisks</p>
</dd>
</dl>
</dd>
<dt><strong><a name="thisonly" class="item"><strong>--thisonly</strong></a></strong></dt>

<dd>
<p>outputs only definitions defined in the files on the command line, not those from imported files</p>
</dd>
<dt><strong><a name="s" class="item"><strong>--tr106=s(TR-106)</strong></a></strong></dt>

<dd>
<p>indicates the TR-106 version (i.e. the <strong>bibref</strong> name) to be referenced in any automatically generated description text</p>
<p>the default value is the latest version of TR-106 that is referenced elsewhere in the data model (or <strong>TR-106</strong> if it is not referenced elsewhere)</p>
</dd>
<dt><strong><a name="upnpdm" class="item"><strong>--upnpdm</strong></a></strong></dt>

<dd>
<p>transforms output (currently HTML only) so it looks like a <strong>UPnP DM</strong> (Device Management) data model definition</p>
</dd>
<dt><strong><a name="ugly" class="item"><strong>--ugly</strong></a></strong></dt>

<dd>
<p>disables some prettifications, e.g. inserting spaces to encourage line breaks</p>
<p>this is deprecated because it has been replaced with the more specific <strong>--nohyphenate</strong> and <strong>--showsyntax</strong></p>
</dd>
<dt><strong><strong>--verbose[=i(1)]</strong></strong></dt>

<dd>
<p>enables verbose output; the higher the level the more the output</p>
</dd>
<dt><strong><strong>--warnbibref[=i(1)]</strong></strong></dt>

<dd>
<p>enables bibliographic reference warnings (these warnings are also output if <strong>--verbose</strong> is specified); the higher the level the more warnings</p>
<p>previously known as <strong>--warndupbibref</strong>, which is now deprecated (and will be removed in a future release) because it covers more than just duplicate bibliographic references</p>
</dd>
<dt><strong><a name="writonly" class="item"><strong>--writonly</strong></a></strong></dt>

<dd>
<p>reports only on writable parameters (should, but does not, suppress reports of read-only objects that contain no writable parameters)</p>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="limitations">LIMITATIONS</a></h1>
<p>This script is only for illustration of concepts and has many shortcomings.</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>William Lupton &lt;<a href="mailto:wlupton@2wire.com">wlupton@2wire.com</a>&gt;</p>
<p>$Date: 2010/03/02 $
$Id: //depot/users/wlupton/cwmp-datamodel/report.pl#156 $</p>

</body>

</html>
